{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Recomendación materiales</title>

	<style>

        body {
            color:#254422;
            background-color: rgb(202, 253, 198);
        }
		.datos {
    		width: 400px;
    		margin: 5px auto;
    		display: block;
		}

		.mselec {
    		width: 400px;
    		margin: 5px auto;
			display: block;}

		.recom{
    		width: 400px;
    		margin: 100px auto;
    		display: block;
		 	transform: scale(1.15);
    		box-shadow: 0 0 20px #1b330a66;
    		transition: all 0.3s ease;
    		z-index: 10;}

		.volver { 
    		top: 12px;
    		left: 2px;
    		display: inline-block;
    		cursor: pointer;
    		z-index: 1000;
		}

		.volver img {
   			width: 200px;            
    		transition: transform 0.1s ease, opacity 0.1s ease;
		}
			
		.volver:hover img {
            transform: scale(1.1); }


		.provincia1 {
    		display: inline-block;
    		padding: 8px 14px;
    		border: 1px solid #14331c;
    		border-radius: 40px;
    		margin: 15px 0;
			background-color: #389b3cff;
		}

		.provincia1 a {
   			text-decoration: none;
    		color: #eaf7e7;
			font-family: Arial, Helvetica, sans-serif;
    		font-weight: bold;
		}

		.datitos {
    		font-size: 18px;      
    		line-height: 1;           
    		margin-bottom: 2px;
			font-family: Arial, Helvetica, sans-serif; 
		}

		.texto {
    		font-family: 'Arial', sans-serif; 
    		font-size: 20px;                   
    		color: #254422;                    
    		margin-bottom: 20px;              
		}

		hr.separador {
    		border: 0;
    		height: 7px;
    		border-radius: 8px;
    		background: linear-gradient(
        		90deg,
        		#6b4f3f,
        		#8b5e3c,
        		#6b4f3f
    		);
    		box-shadow: inset 0 0 5px #4a3728;
    		margin: 25px 0;
		}


		.materialselec {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 20px;
		}	

		.recomendacion {
    		background: #b2e5a8;
			font-family: Arial, Helvetica, sans-serif;
    		border: 2px solid #2a692c;  
    		border-radius: 15px;         
    		padding: 15px 20px;          
    		margin-bottom: 20px;         
    		box-shadow: 0 4px 8px rgba(42, 105, 44, 0.3); 
    		transition: transform 0.3s ease, box-shadow 0.3s ease;
		}

		.recomendacion:hover {
    		transform: translateY(-5px); /* levanta la caja */
    		box-shadow: 0 8px 16px rgba(42, 105, 44, 0.5); /* sombra más intensa */
		}


		.recomendacion ul {
    		list-style: none;      /* quitamos bullets por defecto */
    		padding-left: 25px;    /* espacio para la hoja */
		}

		.recomendacion ul li {
   			position: relative;
    		margin-bottom: 10px;
    		padding-left: 25px;    /* espacio para la hoja */
    		line-height: 1.4;
    		transition: transform 0.2s ease;
		}

/* Pseudo-elemento para la hoja */
		.recomendacion ul li::before {
    		content: "";
   			position: absolute;
    		left: 0;
    		top: 50%;
    		transform: translateY(-50%);
    		width: 20px;
    		height: 20px;
    		background: url("{% static 'hoja.svg' %}") no-repeat center center;
    		background-size: contain;
    		transition: transform 0.3s ease;
		}

/* Efecto al pasar el mouse */
		.recomendacion ul li:hover::before {
    		transform: translateY(-50%) scale(1.3) rotate(-10deg);
		}

		.sticker {      /* sobre el contenido */
    		width: 50px;           /* tamaño de cada sticker */
    		height: 50px;
    		pointer-events: none;  /* no interfiere con clicks */
    		z-index: 9999;         /* encima de todo */
		}



	</style>
</head>
<body>

	<img src="{% static 'hoja.svg' %}" class="sticker" style="top:10%; left:5%;">
	<img src="{% static 'flor.svg' %}" class="sticker" style="top:30%; right:10%;">
	<img src="{% static 'flor1.svg' %}" class="sticker" style="bottom:15%; left:40%;">


	<a href="{% url 'home' %}" class="volver">
        <img src="{% static 'volver.svg' %}" >
    </a>
    

<img src="{% static 'datos.svg' %}" alt="logo" class="datos">



{% if registro %}
<div class="datitos">
<p><strong>Provincia:</strong> {{ registro.provincia }}</p>
<p><strong>Latitud:</strong> {{ registro.lat }}</p>
<p><strong>Longitud:</strong> {{ registro.lon }}</p>
<p><strong>Temp Promedio (°C):</strong> {{ registro.temp_avg }}</p>
<p><strong>Radiación Solar (kWh/m²/día):</strong> {{ registro.irr_avg }}</p>
<p><strong>Viento Promedio (m/s):</strong> {{ registro.wind_avg }}</p>
<p><em>Última actualización: {{ registro.fecha_actualizacion }}</em></p>
</div>

<div class="provincia1">
	<a href="{% url 'elegir_provincia' %}">Cambiar Provincia</a>
</div>


{% if analysis and analysis.seleccionados %}
	<hr class="separador">
	<img src="{% static 'mselec.svg' %}" alt="logo" class="mselec">
<ul>
{% for m in analysis.seleccionados %}
    <li class="materialselec">
        <span class="nombre">{{ m.nombre }}</span> — 
        <span class="categoria">{{ m.get_categoria_display }}</span>
    </li>
{% endfor %}
</ul>

	<hr class="separador">
	<img src="{% static 'recomendados.svg' %}" alt="logo" class="recom">
	<p class="texto">
    Basado en las condiciones climáticas de tu provincia y los materiales que planeabas usar, sugerimos alternativas más ecológicas (si las hay):
	</p>

<div>
{% for item in analysis.recommendations %}
    <div class="recomendacion">
        <strong>Para:</strong> {{ item.selected.nombre }} ({{ item.selected.get_categoria_display }})<br/>
        <strong>Alternativas recomendadas:</strong>
        {% if item.alternatives %}
            <ul>
            {% for alt in item.alternatives %}
                <li><strong>{{ alt.nombre }}</strong> — {{ alt.descripcion }} (Categoría: {{ alt.get_categoria_display }})</li>
            {% endfor %}
            </ul>
        {% else %}
            <em>No se encontraron alternativas naturales similares.</em>
        {% endif %}
    </div>
{% endfor %}
</div>

{% endif %}

{% else %}
<p>No has ingresado datos aún.</p>
<a href="{% url 'elegir_provincia' %}">Seleccionar Provincia</a>
{% endif %}
</body>